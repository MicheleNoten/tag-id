<%= simple_form_for @product, html: { data: { controller: "fabric-list" }} do |f| %>
  <%= f.input :item_name %>

  <div data-fabric-list-target="list">
    <% @product.product_fabrics.each_with_index do |fabric, index| %>
      <div class="fabric-container" data-fabric-list-target="fabric">
        <div class="fabric mb-3">
          <label for="fabric_type_<%= index + 1 %>" class="form-label">Fabric type</label>
          <input value="<%= fabric.fabric.name if fabric.fabric %>" type="text" class="form-control" name="fabric_type_<%= index + 1 %>" id="fabric_type_<%= index + 1 %>">
        </div>
        <div class="fabric">
          <label for="fabric_composition_<%= index + 1 %>" class="form-label">Percentage (%)</label>
          <input type="text" name="fabric_composition_<%= index + 1 %>" class="form-control" id="fabric_composition_<%= index + 1 %>" value="<%= fabric.fabric_percent %>">
        </div>
        <button type="button" data-action="click->fabric-list#removeFabric" style="background: none; border: none; color: black; cursor: pointer;">X</button>
      </div>
    <% end %>
  </div>
  <button data-action="click->fabric-list#add">Add</button>
  <%= f.hidden_field :counter, value: @product.product_fabrics.size, data: { fabric_list_target: "counter" } %>
  <%= f.input :made_in %>
  <%= f.input :brand %>
  <%= f.association :category %>
  <%= f.input :purchased_in %>
  <%= f.input :certification_label %>
  <%= f.input :photos, as: :file, input_html: { multiple: true } %>
  <%= f.input :comments %>
  <%= f.submit class: 'button button-green w-100 m-0 mt-4' %>
  <%= link_to "Delete", root_path(@product), method: :delete, data: { confirm: 'Are you sure?' }, class: 'button button-beige m-0 mt-4 w-100' %>
<% end %>
